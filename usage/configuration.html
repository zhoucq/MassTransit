
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Configure MassTransit Â· MassTransit</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../build/gitbook.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="transports.html" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Overview</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../understand/">
            
                <a href="../understand/">
            
                    
                    Understanding MassTransit
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../understand/key-ideas.html">
            
                <a href="../understand/key-ideas.html">
            
                    
                    Key terminology
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../understand/under-the-hood.html">
            
                <a href="../understand/under-the-hood.html">
            
                    
                    Under the hood
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../understand/additions-to-transport.html">
            
                <a href="../understand/additions-to-transport.html">
            
                    
                    What we add to the transport
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../understand/publishing.html">
            
                <a href="../understand/publishing.html">
            
                    
                    Publishing messages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../understand/sending.md">
            
                <span>
            
                    
                    Sending messages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../understand/message-contracts.html">
            
                <a href="../understand/message-contracts.html">
            
                    
                    Message contract design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="../understand/perfcounters.html">
            
                <a href="../understand/perfcounters.html">
            
                    
                    Performance counters
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../quickstart.html">
            
                <a href="../quickstart.html">
            
                    
                    Quick Start!
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../learn/">
            
                <a href="../learn/">
            
                    
                    Learning MassTransit
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../learn/samples/">
            
                <a href="../learn/samples/">
            
                    
                    Samples
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="../learn/samples/courier.html">
            
                <a href="../learn/samples/courier.html">
            
                    
                    Courier
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.2" data-path="../learn/samples/request-response.html">
            
                <a href="../learn/samples/request-response.html">
            
                    
                    Request/Response
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.3" data-path="../learn/samples/saga.html">
            
                <a href="../learn/samples/saga.html">
            
                    
                    Saga
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../learn/videos.html">
            
                <a href="../learn/videos.html">
            
                    
                    Videos
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../learn/courses.html">
            
                <a href="../learn/courses.html">
            
                    
                    Courses
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../learn/loving-the-community.html">
            
                <a href="../learn/loving-the-community.html">
            
                    
                    Loving the community
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../contributing/">
            
                <a href="../contributing/">
            
                    
                    Contributing
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Usage</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../introduction/">
            
                <a href="../introduction/">
            
                    
                    Installation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../introduction/prerequisites.html">
            
                <a href="../introduction/prerequisites.html">
            
                    
                    Prerequisites
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="../introduction/how-to-install.html">
            
                <a href="../introduction/how-to-install.html">
            
                    
                    How to install
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="../introduction/getting-help.html">
            
                <a href="../introduction/getting-help.html">
            
                    
                    Getting help
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.4" data-path="../introduction/how-to-report-bugs.html">
            
                <a href="../introduction/how-to-report-bugs.html">
            
                    
                    How to report bugs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="./">
            
                <a href="./">
            
                    
                    Using MassTransit
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="2.2.1" data-path="configuration.html">
            
                <a href="configuration.html">
            
                    
                    Configure MassTransit
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.2" data-path="transports.html">
            
                <a href="transports.html">
            
                    
                    Choose a transport
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3" data-path="message-contracts.html">
            
                <a href="message-contracts.html">
            
                    
                    Create message contracts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.4" data-path="message-consumers.html">
            
                <a href="message-consumers.html">
            
                    
                    Create message consumers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.5" data-path="producing-messages.html">
            
                <a href="producing-messages.html">
            
                    
                    Produce messages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.6" data-path="correlation.html">
            
                <a href="correlation.html">
            
                    
                    Correlate messages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.7" data-path="containers/">
            
                <a href="containers/">
            
                    
                    Use IoC container
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.7.1" data-path="containers/autofac.html">
            
                <a href="containers/autofac.html">
            
                    
                    Autofac
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.7.2" data-path="containers/ninject.html">
            
                <a href="containers/ninject.html">
            
                    
                    Ninject
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.7.3" data-path="containers/structuremap.html">
            
                <a href="containers/structuremap.html">
            
                    
                    StructureMap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.7.4" data-path="containers/unity.html">
            
                <a href="containers/unity.html">
            
                    
                    Unity
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.7.5" data-path="containers/castlewindsor.html">
            
                <a href="containers/castlewindsor.html">
            
                    
                    Castle Windsor
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2.8" data-path="request-response.html">
            
                <a href="request-response.html">
            
                    
                    Request/response
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.9" data-path="exceptions.html">
            
                <a href="exceptions.html">
            
                    
                    Handle exceptions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.10" data-path="retries.html">
            
                <a href="retries.html">
            
                    
                    Configure retries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.11" data-path="scheduling/">
            
                <a href="scheduling/">
            
                    
                    Schedule messages
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.11.1" data-path="scheduling/scheduling-api.html">
            
                <a href="scheduling/scheduling-api.html">
            
                    
                    Scheduling API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.11.2" data-path="scheduling/in-memory.html">
            
                <a href="scheduling/in-memory.html">
            
                    
                    In-memory scheduling
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.11.3" data-path="scheduling/azure-sb-scheduler.html">
            
                <a href="scheduling/azure-sb-scheduler.html">
            
                    
                    Azure Service Bus
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.11.4" data-path="scheduling/rabbitmq-delayed.html">
            
                <a href="scheduling/rabbitmq-delayed.html">
            
                    
                    RabbitMQ Delayed Exchange
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.11.5" data-path="scheduling/redeliver.html">
            
                <a href="scheduling/redeliver.html">
            
                    
                    Redelivering messages
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2.12" data-path="observers.html">
            
                <a href="observers.html">
            
                    
                    Observe messages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.13" data-path="lifecycle-observers.html">
            
                <a href="lifecycle-observers.html">
            
                    
                    Observe lifecycle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.14" data-path="connect-endpoint.html">
            
                <a href="connect-endpoint.html">
            
                    
                    Connect endpoints
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Advanced</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../advanced/sagas/">
            
                <a href="../advanced/sagas/">
            
                    
                    Sagas
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="../advanced/sagas/automatonymous.html">
            
                <a href="../advanced/sagas/automatonymous.html">
            
                    
                    Automatonymous
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="../advanced/sagas/persistence.html">
            
                <a href="../advanced/sagas/persistence.html">
            
                    
                    Persistence
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../advanced/courier/">
            
                <a href="../advanced/courier/">
            
                    
                    Courier
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.1" data-path="../advanced/courier/activities.html">
            
                <a href="../advanced/courier/activities.html">
            
                    
                    Activities
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.2" data-path="../advanced/courier/builder.html">
            
                <a href="../advanced/courier/builder.html">
            
                    
                    Builder
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.3" data-path="../advanced/courier/execute.html">
            
                <a href="../advanced/courier/execute.html">
            
                    
                    Execution
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.4" data-path="../advanced/courier/events.html">
            
                <a href="../advanced/courier/events.html">
            
                    
                    Events
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.5" data-path="../advanced/courier/subscriptions.html">
            
                <a href="../advanced/courier/subscriptions.html">
            
                    
                    Subscriptions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../advanced/middleware/">
            
                <a href="../advanced/middleware/">
            
                    
                    Middleware
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.3.1" data-path="../advanced/middleware/circuit-breaker.html">
            
                <a href="../advanced/middleware/circuit-breaker.html">
            
                    
                    Circuit breaker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.2" data-path="../advanced/middleware/rate-limiter.html">
            
                <a href="../advanced/middleware/rate-limiter.html">
            
                    
                    Rate limiter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.3" data-path="../advanced/middleware/latest.html">
            
                <a href="../advanced/middleware/latest.html">
            
                    
                    Latest
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.4" data-path="../advanced/middleware/custom.html">
            
                <a href="../advanced/middleware/custom.html">
            
                    
                    Custom
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../advanced/turnout/">
            
                <a href="../advanced/turnout/">
            
                    
                    Turnout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="../advanced/versioning.html">
            
                <a href="../advanced/versioning.html">
            
                    
                    Versioning
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="../advanced/transactions.html">
            
                <a href="../advanced/transactions.html">
            
                    
                    Transactions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="../advanced/interoperability.html">
            
                <a href="../advanced/interoperability.html">
            
                    
                    Interoperability
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Troubleshooting</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../troubleshooting/">
            
                <a href="../troubleshooting/">
            
                    
                    Troubleshooting
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="../troubleshooting/common-gotchas.html">
            
                <a href="../troubleshooting/common-gotchas.html">
            
                    
                    Common gotchas
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="../troubleshooting/show-config.html">
            
                <a href="../troubleshooting/show-config.html">
            
                    
                    Diagnostics
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Architecture</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../architecture/">
            
                <a href="../architecture/">
            
                    
                    Articles
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1" data-path="../architecture/green-cache.html">
            
                <a href="../architecture/green-cache.html">
            
                    
                    Green Cache
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Configure MassTransit</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="configuring-masstransit">Configuring MassTransit</h1>
<p>To configure MassTransit in your application, it depends upon the application type.
There are several application types, which are covered below. In these examples, the
use of a dependency injection framework is not included. Using a container (such as
Autofac, StructureMap, etc.) with MassTransit is covered separately.</p>
<h2 id="masstransit-in-a-console-application">MassTransit in a console application</h2>
<p>A console application has a <code>Main</code> entry point, which is part of the <code>Program.cs</code> class
by default. The example below configures a simple bus instance that publishes an event with
a value entered.</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">namespace</span> EventPublisher
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ValueEntered</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">string</span> Value <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Program</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">static</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">var</span> busControl <span class="token operator">=</span> <span class="token function">ConfigureBus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            busControl<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">do</span>
            <span class="token punctuation">{</span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;Enter message (or quit to exit)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">&quot;&gt; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">string</span> <span class="token keyword">value</span> <span class="token operator">=</span> Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;quit&quot;</span><span class="token punctuation">.</span><span class="token function">Equals</span><span class="token punctuation">(</span><span class="token keyword">value</span><span class="token punctuation">,</span> StringComparison<span class="token punctuation">.</span>OrdinalIgnoreCase<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>

                busControl<span class="token punctuation">.</span><span class="token generic-method function">Publish<span class="token punctuation">&lt;</span>ValueEntered<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">new</span>
                <span class="token punctuation">{</span>
                    Value <span class="token operator">=</span> <span class="token keyword">value</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            busControl<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">static</span> IBusControl <span class="token function">ConfigureBus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> Bus<span class="token punctuation">.</span>Factory<span class="token punctuation">.</span><span class="token function">CreateUsingRabbitMq</span><span class="token punctuation">(</span>cfg <span class="token operator">=</span><span class="token operator">&gt;</span>
            <span class="token punctuation">{</span>
                cfg<span class="token punctuation">.</span><span class="token function">Host</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Uri</span><span class="token punctuation">(</span><span class="token string">&quot;rabbitmq://localhost&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> h <span class="token operator">=</span><span class="token operator">&gt;</span>
                <span class="token punctuation">{</span>
                    h<span class="token punctuation">.</span><span class="token function">Username</span><span class="token punctuation">(</span><span class="token string">&quot;guest&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    h<span class="token punctuation">.</span><span class="token function">Password</span><span class="token punctuation">(</span><span class="token string">&quot;guest&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>In the example, the bus is configured and started, after which a publishing loop
allows values to be entered and published. When the loop exits, the <code>busControl</code>
variable is disposed, which stops the bus.</p>
<h2 id="masstransit-in-a-windows-service">MassTransit in a Windows service</h2>
<p>A Windows service is recommended for consuming commands and events as it provides an
autonomous execution environment for message consumers. The service can be started and
stopped using the service control manager, as well as monitored by operations tools.</p>
<div class="alert alert-info">
<b>Note:</b>
    To create a Windows service, we strongly recommend using Topshelf, as it was built
    specifically for this purpose. Topshelf is easy to use, has zero dependencies, and
    creates a service that can be self-installed without additional tools.
</div>

<p>The important aspect of configuring a bus in a Windows service is to ensure that the bus
is only configured and started when the service is <em>started</em>.</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">namespace</span> EventService
<span class="token punctuation">{</span>
    <span class="token keyword">using</span> Topshelf<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Program</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token keyword">static</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> HostFactory<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span>cfg <span class="token operator">=</span><span class="token operator">&gt;</span> cfg<span class="token punctuation">.</span><span class="token function">Service</span><span class="token punctuation">(</span>x <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">new</span> <span class="token class-name">EventConsumerService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">class</span> <span class="token class-name">EventConsumerService</span> <span class="token punctuation">:</span>
        ServiceControl
    <span class="token punctuation">{</span>
        IBusControl _bus<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token keyword">bool</span> <span class="token function">Start</span><span class="token punctuation">(</span>HostControl hostControl<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            _bus <span class="token operator">=</span> <span class="token function">ConfigureBus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            _bus<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">bool</span> <span class="token function">Stop</span><span class="token punctuation">(</span>HostControl hostControl<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            _bus<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span>TimeSpan<span class="token punctuation">.</span><span class="token function">FromSeconds</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        IBusControl <span class="token function">ConfigureBus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> Bus<span class="token punctuation">.</span>Factory<span class="token punctuation">.</span><span class="token function">CreateUsingRabbitMq</span><span class="token punctuation">(</span>cfg <span class="token operator">=</span><span class="token operator">&gt;</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">var</span> host <span class="token operator">=</span> cfg<span class="token punctuation">.</span><span class="token function">Host</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Uri</span><span class="token punctuation">(</span><span class="token string">&quot;rabbitmq://localhost&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> h <span class="token operator">=</span><span class="token operator">&gt;</span>
                <span class="token punctuation">{</span>
                    h<span class="token punctuation">.</span><span class="token function">Username</span><span class="token punctuation">(</span><span class="token string">&quot;guest&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    h<span class="token punctuation">.</span><span class="token function">Password</span><span class="token punctuation">(</span><span class="token string">&quot;guest&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                cfg<span class="token punctuation">.</span><span class="token function">ReceiveEndpoint</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span> <span class="token string">&quot;event_queue&quot;</span><span class="token punctuation">,</span> e <span class="token operator">=</span><span class="token operator">&gt;</span>
                <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token generic-method function">Handler<span class="token punctuation">&lt;</span>ValueEntered<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>context <span class="token operator">=</span><span class="token operator">&gt;</span>
                        Console<span class="token punctuation">.</span>Out<span class="token punctuation">.</span><span class="token function">WriteLineAsync</span><span class="token punctuation">(</span>$<span class="token string">&quot;Value was entered: {context.Message.Value}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="masstransit-in-a-web-application">MassTransit in a web application</h2>
<p>Configuring a bus in a web site is typically done to publish events, send commands,
as well as engage in request/response conversations. Hosting receive endpoints and
persistent consumers is not recommended (use a service as shown above).</p>
<h3 id="aspnet-mvcwebapi2">ASP.NET (MVC/WebApi2)</h3>
<p>In a web application, the <code>HttpApplication</code> class methods of <code>Application_Start</code> and
<code>Application_End</code> are used to configure/start the bus and stop the bus respectively.</p>
<div class="alert alert-info">
<b>Note:</b>
    While many MassTransit samples use Topshelf, web applications are an exception
    where the standard web application conventions are followed.
</div>

<pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MvcApplication</span> <span class="token punctuation">:</span> HttpApplication
<span class="token punctuation">{</span>
    <span class="token keyword">static</span> IBusControl _busControl<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> IBus Bus
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _busControl<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">Application_Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _busControl <span class="token operator">=</span> <span class="token function">ConfigureBus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        _busControl<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">Application_End</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _busControl<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span>TimeSpan<span class="token punctuation">.</span><span class="token function">FromSeconds</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    IBusControl <span class="token function">ConfigureBus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Bus<span class="token punctuation">.</span>Factory<span class="token punctuation">.</span><span class="token function">CreateUsingRabbitMq</span><span class="token punctuation">(</span>cfg <span class="token operator">=</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">var</span> host <span class="token operator">=</span> cfg<span class="token punctuation">.</span><span class="token function">Host</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Uri</span><span class="token punctuation">(</span><span class="token string">&quot;rabbitmq://localhost&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> h <span class="token operator">=</span><span class="token operator">&gt;</span>
            <span class="token punctuation">{</span>
                h<span class="token punctuation">.</span><span class="token function">Username</span><span class="token punctuation">(</span><span class="token string">&quot;guest&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                h<span class="token punctuation">.</span><span class="token function">Password</span><span class="token punctuation">(</span><span class="token string">&quot;guest&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NotifyController</span> <span class="token punctuation">:</span> Controller
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">async</span> Task<span class="token operator">&lt;</span>ActionResult<span class="token operator">&gt;</span> <span class="token function">Put</span><span class="token punctuation">(</span><span class="token keyword">string</span> <span class="token keyword">value</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">await</span> MvcApplication<span class="token punctuation">.</span>Bus<span class="token punctuation">.</span><span class="token generic-method function">Publish<span class="token punctuation">&lt;</span>ValueNotified<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">new</span>
        <span class="token punctuation">{</span>
            Value <span class="token operator">=</span> <span class="token keyword">value</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token function">View</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CommandController</span> <span class="token punctuation">:</span> Controller
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">async</span> Task<span class="token operator">&lt;</span>ActionResult<span class="token operator">&gt;</span> <span class="token function">Send</span><span class="token punctuation">(</span><span class="token keyword">string</span> <span class="token keyword">value</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">var</span> endpoint <span class="token operator">=</span> <span class="token keyword">await</span> MvcApplication<span class="token punctuation">.</span>Bus<span class="token punctuation">.</span><span class="token function">GetSendEndpoint</span><span class="token punctuation">(</span>_serviceAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">await</span> endpoint<span class="token punctuation">.</span><span class="token generic-method function">Send<span class="token punctuation">&lt;</span>SubmitValue<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">new</span>
        <span class="token punctuation">{</span>
            Timestamp <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow<span class="token punctuation">,</span>
            Value <span class="token operator">=</span> <span class="token keyword">value</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token function">View</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The above example is kept simple, providing a static <code>MvcApplication.Bus</code> property
to access the bus instance (for publishing events, and sending commands to endpoints).
Newer version of ASP.NET have built-in dependency resolution, in which case the <code>IBus</code>
should be registered so that controllers can specify the dependency in the constructor.
In fact, the inherited <code>IPublishEndpoint</code> and <code>ISendEndpointProvider</code> should also
be registered.</p>
<p>The example controllers show how to publish and send messages as well.</p>
<h3 id="owin-pipeline-webapi2">OWIN Pipeline (WebApi2)</h3>
<p>WebApi2 can alternatively use the OWIN pipeline. But OWIN doesn&apos;t have <code>Application_End</code>
and so it requires a different approach to ensure the bus is disposed properly.</p>
<p>This example shows an OWIN WebApi2 project using the Autofac Container. The concept should
be similar if you aren&apos;t using WebApi2 or a different Container, but still OWIN.</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Startup</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Configuration</span><span class="token punctuation">(</span>IAppBuilder app<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// STANDARD WEB API SETUP:</span>

        <span class="token comment" spellcheck="true">// Get your HttpConfiguration. In OWIN, you&apos;ll create one</span>
        <span class="token comment" spellcheck="true">// rather than using GlobalConfiguration.</span>
        <span class="token keyword">var</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        WebApiConfig<span class="token punctuation">.</span><span class="token function">Register</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Register your routes</span>

        <span class="token comment" spellcheck="true">// Make the autofac container</span>
        <span class="token keyword">var</span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ContainerBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// Register your Bus</span>
        builder<span class="token punctuation">.</span><span class="token function">Register</span><span class="token punctuation">(</span>c <span class="token operator">=</span><span class="token operator">&gt;</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">return</span> Bus<span class="token punctuation">.</span>Factory<span class="token punctuation">.</span><span class="token function">CreateUsingRabbitMq</span><span class="token punctuation">(</span>sbc <span class="token operator">=</span><span class="token operator">&gt;</span>
                    sbc<span class="token punctuation">.</span><span class="token function">Host</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;dev&quot;</span><span class="token punctuation">,</span> h <span class="token operator">=</span><span class="token operator">&gt;</span>
                    <span class="token punctuation">{</span>
                        h<span class="token punctuation">.</span><span class="token function">Username</span><span class="token punctuation">(</span><span class="token string">&quot;guest&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        h<span class="token punctuation">.</span><span class="token function">Password</span><span class="token punctuation">(</span><span class="token string">&quot;guest&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method function">As<span class="token punctuation">&lt;</span>IBusControl<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method function">As<span class="token punctuation">&lt;</span>IPublishEndpoint<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">SingleInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// Register anything else you might need...</span>

        <span class="token comment" spellcheck="true">// Build the container</span>
        <span class="token keyword">var</span> container <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// OWIN WEB API SETUP:</span>

        <span class="token comment" spellcheck="true">// set the DependencyResolver</span>
        config<span class="token punctuation">.</span>DependencyResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AutofacWebApiDependencyResolver</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// Register the Autofac middleware FIRST, then the Autofac Web API middleware,</span>
        <span class="token comment" spellcheck="true">// and finally the standard Web API middleware.</span>

        app<span class="token punctuation">.</span><span class="token function">UseAutofacMiddleware</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>
        app<span class="token punctuation">.</span><span class="token function">UseAutofacWebApi</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
        app<span class="token punctuation">.</span><span class="token function">UseWebApi</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// Starts Mass Transit Service bus, and registers stopping of bus on app dispose</span>
        <span class="token keyword">var</span> bus <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token generic-method function">Resolve<span class="token punctuation">&lt;</span>IBusControl<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> busHandle <span class="token operator">=</span> TaskUtil<span class="token punctuation">.</span><span class="token function">Await</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> bus<span class="token punctuation">.</span><span class="token function">StartAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AppProperties</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>Properties<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span>OnAppDisposing <span class="token operator">!=</span> CancellationToken<span class="token punctuation">.</span>None<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            properties<span class="token punctuation">.</span>OnAppDisposing<span class="token punctuation">.</span><span class="token function">Register</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> busHandle<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span>TimeSpan<span class="token punctuation">.</span><span class="token function">FromSeconds</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The important bit is the last several lines where we resolve the <code>IBusControl</code> and
register an action to stop when the app disposes.</p>
<p>You&apos;ll also notice we registered the bus <code>.As<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>IPublishEndpoint</span><span class="token punctuation">&gt;</span></span>()</code>. That&apos;s because we are
following the guidance above, where our websites should really only be Publishing to the
service bus.</p>
<p>Now your controller might look like:</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyController</span> <span class="token punctuation">:</span> ApiController
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> IPublishEndpoint _publishEndpoint<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">MyController</span><span class="token punctuation">(</span>IPublishEndpoint publishEndpoint<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _publishEndpoint <span class="token operator">=</span> publishEndpoint<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">[</span>HttpPost<span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">async</span> Task<span class="token operator">&lt;</span>IHttpActionResult<span class="token operator">&gt;</span> <span class="token function">OrderShipped</span><span class="token punctuation">(</span><span class="token keyword">int</span> orderId<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">await</span> _publishEndpoint<span class="token punctuation">.</span><span class="token generic-method function">Publish<span class="token punctuation">&lt;</span>OrderShipped<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
        <span class="token keyword">new</span>
        <span class="token punctuation">{</span>
            OrderId <span class="token operator">=</span> orderId
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token function">Ok</span><span class="token punctuation">(</span><span class="token string">&quot;Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: Using MassTransit">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="transports.html" class="navigation navigation-next " aria-label="Next page: Choose a transport">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Configure MassTransit","level":"2.2.1","depth":2,"next":{"title":"Choose a transport","level":"2.2.2","depth":2,"path":"usage/transports.md","ref":"usage/transports.md","articles":[]},"previous":{"title":"Using MassTransit","level":"2.2","depth":1,"path":"usage/README.md","ref":"usage/README.md","articles":[{"title":"Configure MassTransit","level":"2.2.1","depth":2,"path":"usage/configuration.md","ref":"usage/configuration.md","articles":[]},{"title":"Choose a transport","level":"2.2.2","depth":2,"path":"usage/transports.md","ref":"usage/transports.md","articles":[]},{"title":"Create message contracts","level":"2.2.3","depth":2,"path":"usage/message-contracts.md","ref":"usage/message-contracts.md","articles":[]},{"title":"Create message consumers","level":"2.2.4","depth":2,"path":"usage/message-consumers.md","ref":"usage/message-consumers.md","articles":[]},{"title":"Produce messages","level":"2.2.5","depth":2,"path":"usage/producing-messages.md","ref":"usage/producing-messages.md","articles":[]},{"title":"Correlate messages","level":"2.2.6","depth":2,"path":"usage/correlation.md","ref":"usage/correlation.md","articles":[]},{"title":"Use IoC container","level":"2.2.7","depth":2,"path":"usage/containers/README.md","ref":"usage/containers/README.md","articles":[{"title":"Autofac","level":"2.2.7.1","depth":3,"path":"usage/containers/autofac.md","ref":"usage/containers/autofac.md","articles":[]},{"title":"Ninject","level":"2.2.7.2","depth":3,"path":"usage/containers/ninject.md","ref":"usage/containers/ninject.md","articles":[]},{"title":"StructureMap","level":"2.2.7.3","depth":3,"path":"usage/containers/structuremap.md","ref":"usage/containers/structuremap.md","articles":[]},{"title":"Unity","level":"2.2.7.4","depth":3,"path":"usage/containers/unity.md","ref":"usage/containers/unity.md","articles":[]},{"title":"Castle Windsor","level":"2.2.7.5","depth":3,"path":"usage/containers/castlewindsor.md","ref":"usage/containers/castlewindsor.md","articles":[]}]},{"title":"Request/response","level":"2.2.8","depth":2,"path":"usage/request-response.md","ref":"usage/request-response.md","articles":[]},{"title":"Handle exceptions","level":"2.2.9","depth":2,"path":"usage/exceptions.md","ref":"usage/exceptions.md","articles":[]},{"title":"Configure retries","level":"2.2.10","depth":2,"path":"usage/retries.md","ref":"usage/retries.md","articles":[]},{"title":"Schedule messages","level":"2.2.11","depth":2,"path":"usage/scheduling/README.md","ref":"usage/scheduling/README.md","articles":[{"title":"Scheduling API","level":"2.2.11.1","depth":3,"path":"usage/scheduling/scheduling-api.md","ref":"usage/scheduling/scheduling-api.md","articles":[]},{"title":"In-memory scheduling","level":"2.2.11.2","depth":3,"path":"usage/scheduling/in-memory.md","ref":"usage/scheduling/in-memory.md","articles":[]},{"title":"Azure Service Bus","level":"2.2.11.3","depth":3,"path":"usage/scheduling/azure-sb-scheduler.md","ref":"usage/scheduling/azure-sb-scheduler.md","articles":[]},{"title":"RabbitMQ Delayed Exchange","level":"2.2.11.4","depth":3,"path":"usage/scheduling/rabbitmq-delayed.md","ref":"usage/scheduling/rabbitmq-delayed.md","articles":[]},{"title":"Redelivering messages","level":"2.2.11.5","depth":3,"path":"usage/scheduling/redeliver.md","ref":"usage/scheduling/redeliver.md","articles":[]}]},{"title":"Observe messages","level":"2.2.12","depth":2,"path":"usage/observers.md","ref":"usage/observers.md","articles":[]},{"title":"Observe lifecycle","level":"2.2.13","depth":2,"path":"usage/lifecycle-observers.md","ref":"usage/lifecycle-observers.md","articles":[]},{"title":"Connect endpoints","level":"2.2.14","depth":2,"path":"usage/connect-endpoint.md","ref":"usage/connect-endpoint.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["edit-link","prism","-highlight","github","anchorjs","expandable-chapters"],"root":"docs","styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{},"github":{"url":"https://github.com/MassTransit/MassTransit/"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/masstransit/masstransit/tree/master/docs"},"theme-default":{"styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchorjs":{},"expandable-chapters":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"MassTransit","gitbook":"3.2.2"},"file":{"path":"usage/configuration.md","mtime":"2017-03-13T21:10:40.957Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-03-13T21:14:04.870Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.1/anchor.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

